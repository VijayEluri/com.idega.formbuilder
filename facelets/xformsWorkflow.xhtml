<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ws="http://xmlns.idega.com/com.idega.workspace"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:f="http://java.sun.com/jsf/core"
	
>

<ws:page 	id="xformsWorkflow"
			showFunctionMenu="true"
			javascripturls="/idegaweb/bundles/com.idega.block.web2.0.bundle/resources/javascript/mootools/1.11/mootools-all.js,
							/dwr/engine.js,
							/dwr/util.js,
							/dwr/interface/JbpmBusiness.js,
							/dwr/interface/XFormsProcess.js,
							/dwr/interface/ActorManager.js,
							/idegaweb/bundles/com.idega.formbuilder.bundle/resources/javascript/xforms_process.js"
			stylesheeturls="/idegaweb/bundles/com.idega.formbuilder.bundle/resources/style/xforms_process.css">

	<h:form enctype="multipart/form-data" id="xformsProcess">
		<div class="fbTabViewContent">
			<div class="taskNodeSelection">
				<div class="formItem wideItem">
					<label for="processSelector">Select process</label>
					<h:selectOneMenu id="processSelector" value="#{actorBindingManager.processId}" onchange="loadProcessTaskList(this.value);">
						<f:selectItems value="#{actorBindingManager.processes}" />
					</h:selectOneMenu>
				</div>
				<div class="formItem wideItem">
					<label for="taskSelector">Select task</label>
					<h:selectManyMenu id="taskSelector" styleClass="taskSelector" value="#{actorBindingManager.taskId}" onchange="loadTaskProperties(this.value);">
						<f:selectItems value="#{actorBindingManager.tasks}" />
					</h:selectManyMenu>
				</div>
			</div>
			<div class="taskNodeProperties">
				<div class="formItem wideItem">
					<label for="taskForm">Select task form</label>
					<h:selectOneMenu id="taskForm" disabled="true" onchange="assignViewToTask(this.value);">
						<f:selectItems value="#{xformsPersistenceManager.forms}" />
					</h:selectOneMenu>
					<h:commandButton styleClass="changeButton" id="changeViewButton" value="Change" onclick="enableFormList();return false;" />
				</div>
				<div class="formItem wideItem">
					<label for="taskGroup">Assigned actor</label>
					<h:outputText styleClass="ass" id="actorNameLabel" value="#{actorBindingManager.actorLabel}" />
					<h:commandButton styleClass="changeButton" id="changeActorButton" value="Change" action="#{actorBindingManager.changeActor}" />
					<t:div rendered="#{actorBindingManager.actorValueEdit}">
						<label for="taskGroup">Type</label>
						<h:selectOneMenu id="actorTypes" value="#{actorBindingManager.actorType}" disabled="false" onchange="setActorType(this.value);">
							<f:selectItems value="#{actorBindingManager.actorTypes}" />
						</h:selectOneMenu>
						<h:selectManyMenu id="actorSelector" value="#{actorBindingManager.actorId}" styleClass="actorSelector">
							<f:selectItems value="#{actorBindingManager.actors}" />
						</h:selectManyMenu>
						<h:commandButton styleClass="changeButton" id="cancelActorButton" value="Cancel" action="#{actorBindingManager.cancelActor}" />
						<h:commandButton styleClass="changeButton" id="saveActorButton" value="OK" action="#{actorBindingManager.saveActor}" />
					</t:div>
				</div>
			</div>
		</div>
	</h:form>
</ws:page>
</html>